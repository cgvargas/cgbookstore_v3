# ğŸ“„ CGBookStore v3 - Documento de Estado do Projeto

**Data:** 30/09/2025  
**VersÃ£o:** 3.1  
**Ãšltima AtualizaÃ§Ã£o:** ImplementaÃ§Ã£o de BookDetailView e Carrossel de Livros

---

## ğŸ¯ VisÃ£o Geral do Projeto

**CGBookStore v3** Ã© uma livraria online desenvolvida em Django 5.0.3 com PostgreSQL (Supabase), focada em proporcionar uma experiÃªncia completa de leitura com biblioteca pessoal gamificada e assistente literÃ¡rio inteligente.

### Tecnologias Principais
- **Backend:** Django 5.0.3
- **Banco de Dados Atual:** SQLite3 (desenvolvimento)
- **Banco de Dados ProduÃ§Ã£o:** PostgreSQL 17.6 (Supabase) - **MIGRAÃ‡ÃƒO PENDENTE**
- **Python:** 3.13
- **Frontend:** Bootstrap 5, Font Awesome, Swiper.js
- **Controle de VersÃ£o:** Git + GitHub

---

## ğŸ“‚ Estrutura Atual do Projeto

```
C:\ProjectsDjango\CGBookStore_v3\
â”œâ”€â”€ cgbookstore/              # ConfiguraÃ§Ãµes do projeto
â”‚   â”œâ”€â”€ settings.py           # âœ… MEDIA configurado
â”‚   â”œâ”€â”€ urls.py               # âœ… Static/Media configurado
â”‚   â””â”€â”€ wsgi.py
â”‚
â”œâ”€â”€ core/                     # App principal (livraria)
â”‚   â”œâ”€â”€ models/               # âœ… MODULAR (NOVO)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ category.py       # Model Category
â”‚   â”‚   â”œâ”€â”€ author.py         # Model Author
â”‚   â”‚   â””â”€â”€ book.py           # Model Book + Google Books
â”‚   â”œâ”€â”€ views/                # âœ… Modular
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ home_view.py
â”‚   â”‚   â”œâ”€â”€ book_views.py
â”‚   â”‚   â”œâ”€â”€ book_detail_view.py  # âœ… NOVO
â”‚   â”‚   â”œâ”€â”€ search_view.py
â”‚   â”‚   â”œâ”€â”€ about_view.py
â”‚   â”‚   â”œâ”€â”€ contact_view.py
â”‚   â”‚   â””â”€â”€ library_view.py
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”œâ”€â”€ 0001_initial.py
â”‚   â”‚   â”œâ”€â”€ 0002_alter_book_options_author_created_at_and_more.py
â”‚   â”‚   â””â”€â”€ 0003_alter_author_bio_alter_book_author_and_more.py
â”‚   â”œâ”€â”€ admin.py              # âœ… Fieldsets organizados
â”‚   â”œâ”€â”€ urls.py               # âœ… book_detail adicionado
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ supabase_storage.py
â”‚
â”œâ”€â”€ accounts/                 # App de autenticaÃ§Ã£o
â”‚   â”œâ”€â”€ forms.py
â”‚   â”œâ”€â”€ views.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ admin.py
â”‚
â”œâ”€â”€ chatbot_literario/        # App do chatbot (placeholder)
â”‚   â”œâ”€â”€ views.py
â”‚   â””â”€â”€ urls.py
â”‚
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ base.html             # âœ… Swiper integrado, Admin no dropdown
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ home.html         # âœ… Carrossel implementado
â”‚   â”‚   â”œâ”€â”€ book_list.html    # âœ… Links de detalhes
â”‚   â”‚   â”œâ”€â”€ book_detail.html  # âœ… NOVO - PÃ¡gina completa
â”‚   â”‚   â”œâ”€â”€ search_results.html
â”‚   â”‚   â”œâ”€â”€ about.html
â”‚   â”‚   â”œâ”€â”€ contact.html
â”‚   â”‚   â””â”€â”€ library.html      # Placeholder
â”‚   â””â”€â”€ accounts/
â”‚       â”œâ”€â”€ login.html
â”‚       â””â”€â”€ register.html
â”‚
â”œâ”€â”€ static/
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ carousel.css      # âœ… NOVO - Estilos do carrossel
â”‚
â”œâ”€â”€ media/                    # âœ… Configurado e funcionando
â”‚   â””â”€â”€ books/
â”‚       â””â”€â”€ covers/
â”‚
â”œâ”€â”€ documents/
â”‚   â””â”€â”€ status/
â”‚       â”œâ”€â”€ status_29092025.md
â”‚       â””â”€â”€ status_30092025.md  # Este arquivo
â”‚
â”œâ”€â”€ .venv/                    # Ambiente virtual
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ manage.py
â”œâ”€â”€ db.sqlite3                # âš ï¸ Banco atual (migrar para Supabase)
â””â”€â”€ .env                      # Credenciais (nÃ£o versionado)
```

---

## âœ… Funcionalidades Implementadas

### Core (Livraria)
- âœ… PÃ¡gina inicial com carrossel estilo Amazon/Kindle
- âœ… CatÃ¡logo de livros com paginaÃ§Ã£o (12 por pÃ¡gina)
- âœ… **BookDetailView completa com todos os campos**
- âœ… Sistema de busca (tÃ­tulo, autor, categoria)
- âœ… PÃ¡gina "Sobre" institucional
- âœ… FormulÃ¡rio de contato (visual, preparado para email)
- âœ… PÃ¡gina de biblioteca pessoal (placeholder estruturado)
- âœ… Upload de imagens funcionando (MEDIA configurado)
- âœ… NavegaÃ§Ã£o com breadcrumbs
- âœ… Livros relacionados por categoria
- âœ… Sistema de avaliaÃ§Ã£o com estrelas (quando disponÃ­vel)

### AutenticaÃ§Ã£o
- âœ… Registro de usuÃ¡rios
- âœ… Login/Logout
- âœ… ProteÃ§Ã£o de rotas (biblioteca requer login)
- âœ… Navbar dinÃ¢mica (mostra usuÃ¡rio logado)
- âœ… Link Admin no dropdown para staff/superuser

### UI/UX
- âœ… Carrossel Swiper.js responsivo
- âœ… Efeitos hover nos cards
- âœ… Design profissional estilo e-commerce
- âœ… NavegaÃ§Ã£o intuitiva
- âœ… Responsividade completa (mobile/tablet/desktop)

---

## ğŸ—ºï¸ Modelos de Dados

### **Category** (`core/models/category.py`)
```python
- name (CharField, unique)
- slug (SlugField, auto-gerado)
- featured (BooleanField)
- created_at (DateTimeField)
```

### **Author** (`core/models/author.py`)
```python
- name (CharField)
- slug (SlugField, auto-gerado)
- bio (TextField, nullable)
- created_at (DateTimeField)
```

### **Book** (`core/models/book.py`)
```python
# Campos locais
- title (CharField)
- slug (SlugField, auto-gerado)
- author (FK Author, nullable)
- category (FK Category, nullable)
- description (TextField, nullable)
- publication_date (DateField)
- isbn (CharField, unique, nullable)
- publisher (CharField, blank)
- price (DecimalField)
- cover_image (ImageField)

# Campos Google Books API (preparados)
- google_books_id (CharField, unique, nullable)
- subtitle (CharField, nullable)
- page_count (IntegerField, nullable)
- average_rating (DecimalField, nullable)
- ratings_count (IntegerField, nullable)
- preview_link (URLField, nullable)
- info_link (URLField, nullable)
- language (CharField, default='pt')

# Metadados
- created_at (DateTimeField)
- updated_at (DateTimeField)
```

---

## ğŸ—ºï¸ URLs Mapeadas

| URL | View | Nome | AutenticaÃ§Ã£o |
|-----|------|------|--------------|
| `/` | HomeView | `core:home` | NÃ£o |
| `/livros/` | BookListView | `core:book_list` | NÃ£o |
| `/livros/<slug>/` | **BookDetailView** | `core:book_detail` | NÃ£o |
| `/buscar/` | SearchView | `core:search` | NÃ£o |
| `/sobre/` | AboutView | `core:about` | NÃ£o |
| `/contato/` | ContactView | `core:contact` | NÃ£o |
| `/biblioteca/` | LibraryView | `core:library` | **Sim** |
| `/contas/login/` | LoginView | `accounts:login` | NÃ£o |
| `/contas/registrar/` | RegisterView | `accounts:register` | NÃ£o |
| `/contas/logout/` | LogoutView | `accounts:logout` | Sim |
| `/chatbot/` | ChatbotView | `chatbot:chat` | NÃ£o |
| `/admin/` | Admin | `admin:index` | Sim (staff) |

---

## ğŸ”§ ConfiguraÃ§Ãµes Importantes

### Banco de Dados (settings.py)
```python
# ATUAL (SQLite3 - Desenvolvimento)
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}

# PRÃ“XIMO PASSO: Migrar para Supabase
# DATABASES = {
#     'default': dj_database_url.config(
#         default=config('DATABASE_URL'),
#         conn_max_age=600
#     )
# }
```

### Arquivos EstÃ¡ticos e Media
```python
STATIC_URL = '/static/'
STATICFILES_DIRS = [os.path.join(BASE_DIR, 'static')]
STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')

MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
```

### Supabase (Preparado, nÃ£o usado ainda)
```python
SUPABASE_URL = config('SUPABASE_URL')
SUPABASE_ANON_KEY = config('SUPABASE_ANON_KEY')
```

---

## ğŸ“¦ DependÃªncias (requirements.txt)

```txt
Django==5.0.3
django-environ==0.11.2
python-decouple==3.8
psycopg[binary]>=3.1.0
dj-database-url==2.1.0
supabase>=2.4.0
storage3>=0.7.3
gotrue>=2.4.1
postgrest>=0.16.0
realtime>=2.0.0
supafunc>=0.4.0
Pillow>=10.0.0
```

---

## ğŸš§ PrÃ³ximas Funcionalidades Planejadas

### ğŸ”¥ PRIORIDADE CRÃTICA - PRÃ“XIMO PASSO
1. **Migrar para PostgreSQL (Supabase)**
   - Configurar DATABASE_URL no .env
   - Testar conexÃ£o
   - Executar migrations no Supabase
   - Migrar dados existentes (se houver)
   - Atualizar settings.py

### Prioridade ALTA (ApÃ³s MigraÃ§Ã£o)
2. **Sistema de SeÃ§Ãµes e Prateleiras DinÃ¢micas**
   - Model Section (tÃ­tulo, tipo, layout, ordem)
   - Model SectionItem (conteÃºdo da seÃ§Ã£o)
   - Model Video (para seÃ§Ãµes de vÃ­deos)
   - Admin inline para gerenciar seÃ§Ãµes
   - RenderizaÃ§Ã£o dinÃ¢mica na home
   - Tipos: Livros, Autores, VÃ­deos
   - Layouts: Carrossel, Grid, Lista

3. **Popular Banco de Dados**
   - Adicionar 20-30 livros via Admin
   - Criar fixtures com dados iniciais
   - Usar script de importaÃ§Ã£o

4. **IntegraÃ§Ã£o Google Books API**
   - Criar `core/utils/google_books_api.py`
   - FunÃ§Ãµes: search_books(), get_by_isbn(), import_to_catalog()
   - Interface admin para buscar e importar
   - SincronizaÃ§Ã£o automÃ¡tica de dados

5. **Sistema de Biblioteca Pessoal (Backend)**
   - Models: UserProfile, BookShelf, ReadingProgress, BookReview
   - CRUD de prateleiras personalizadas
   - Progresso de leitura (%)
   - Sistema de avaliaÃ§Ãµes privadas

### Prioridade MÃ‰DIA
6. **Sistema de Carrinho de Compras**
   - Models: Cart, CartItem, Order
   - Checkout bÃ¡sico
   - IntegraÃ§Ã£o com pagamento (futuro)

7. **Filtros AvanÃ§ados no CatÃ¡logo**
   - Filtro por categoria
   - Filtro por faixa de preÃ§o
   - OrdenaÃ§Ã£o (preÃ§o, data, tÃ­tulo, avaliaÃ§Ã£o)
   - Busca avanÃ§ada

8. **Sistema de Reviews PÃºblico**
   - ComentÃ¡rios pÃºblicos nos livros
   - Sistema de likes/dislikes
   - ModeraÃ§Ã£o

### Prioridade BAIXA
9. **Chatbot LiterÃ¡rio Funcional**
   - IntegraÃ§Ã£o com API (OpenAI/Ollama)
   - RecomendaÃ§Ãµes personalizadas
   - ConversaÃ§Ã£o sobre livros

10. **GamificaÃ§Ã£o**
    - Sistema de pontos por leitura
    - Conquistas (badges)
    - Ranking de leitores
    - Desafios de leitura

---

## ğŸ” VariÃ¡veis de Ambiente (.env)

```env
# Django
SECRET_KEY=sua-secret-key-aqui
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Supabase
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Database (CONFIGURAR PRÃ“XIMO)
DATABASE_URL=postgresql://postgres:[password]@db.[project].supabase.co:5432/postgres
```

---

## ğŸ› Problemas Conhecidos

### Resolvidos
- âœ… DependÃªncias incompatÃ­veis (psycopg2-binary vs psycopg3)
- âœ… OneDrive causando conflitos com .git
- âœ… PyCharm nÃ£o reconhecendo Django
- âœ… Estrutura de models nÃ£o modular
- âœ… Imagens nÃ£o aparecendo (MEDIA_URL nÃ£o configurada)
- âœ… Link Admin nÃ£o visÃ­vel para superuser

### Pendentes
- âš ï¸ Banco SQLite3 (migrar para Supabase PostgreSQL)
- âš ï¸ Poucos livros cadastrados no banco
- âš ï¸ FormulÃ¡rio de contato nÃ£o envia email real
- âš ï¸ Biblioteca nÃ£o tem backend funcional (apenas visual)
- âš ï¸ SeÃ§Ãµes da home sÃ£o fixas (nÃ£o gerenciÃ¡veis pelo admin)

---

## ğŸ”„ Workflow Git

### Comando DiÃ¡rio
```powershell
# InÃ­cio do dia (sincronizar)
git pull

# Fim do dia (enviar alteraÃ§Ãµes)
git add .
git commit -m "DescriÃ§Ã£o das alteraÃ§Ãµes"
git push
```

### Ãšltimos Commits Importantes
```bash
âœ… Feat: Implementa BookDetailView com suporte Google Books API
âœ… Feat: Implementa carrossel de livros estilo Amazon na home
âœ… Feat: Adiciona link do Admin no dropdown do usuÃ¡rio
```

### RepositÃ³rio
- **GitHub:** https://github.com/cgvargas/cgbookstore_v3
- **Branch Principal:** main
- **LocalizaÃ§Ã£o Local:** `C:\ProjectsDjango\CGBookStore_v3`

---

## ğŸš€ Como Executar o Projeto

### Primeira Vez
```powershell
# Clonar repositÃ³rio
git clone https://github.com/cgvargas/cgbookstore_v3.git
cd cgbookstore_v3

# Criar ambiente virtual
python -m venv .venv
.\.venv\Scripts\activate

# Instalar dependÃªncias
pip install -r requirements.txt

# Configurar .env
Copy-Item .env.example .env
# Editar .env com credenciais reais

# Aplicar migrations
python manage.py migrate

# Criar superuser
python manage.py createsuperuser

# Rodar servidor
python manage.py runserver
```

### Uso DiÃ¡rio
```powershell
cd C:\ProjectsDjango\CGBookStore_v3
.\.venv\Scripts\activate
python manage.py runserver
```

---

## ğŸ“ PRÃ“XIMO PASSO IMEDIATO

### ğŸ”¥ MigraÃ§Ã£o para Supabase PostgreSQL

**Objetivo:** Substituir SQLite3 por PostgreSQL (Supabase) antes de acumular muitos dados.

**Passos:**
1. Configurar DATABASE_URL no .env com credenciais Supabase
2. Atualizar settings.py para usar dj_database_url
3. Testar conexÃ£o: `python manage.py dbshell`
4. Executar migrations: `python manage.py migrate`
5. Criar superuser no novo banco: `python manage.py createsuperuser`
6. (Opcional) Migrar dados do SQLite se houver dados importantes:
   ```powershell
   python manage.py dumpdata > backup.json
   # Configurar Supabase
   python manage.py loaddata backup.json
   ```
7. Testar aplicaÃ§Ã£o completa
8. Commit: "Config: Migra banco de dados para Supabase PostgreSQL"

**ApÃ³s migraÃ§Ã£o, continuar com:**
- Sistema de SeÃ§Ãµes e Prateleiras DinÃ¢micas (Model Section, SectionItem, Video)
- Popular banco com mais livros
- IntegraÃ§Ã£o Google Books API

---

## ğŸ“š DocumentaÃ§Ã£o Adicional

- **Django Docs:** https://docs.djangoproject.com/en/5.0/
- **Bootstrap 5:** https://getbootstrap.com/docs/5.3/
- **Supabase Docs:** https://supabase.com/docs
- **Swiper.js:** https://swiperjs.com/
- **Font Awesome:** https://fontawesome.com/icons
- **Google Books API:** https://developers.google.com/books

---

## ğŸ“Š EstatÃ­sticas do Projeto

- **Linhas de CÃ³digo (estimado):** ~3.000
- **Models:** 3 (Category, Author, Book)
- **Views:** 7 (Home, BookList, BookDetail, Search, About, Contact, Library)
- **Templates:** 8 principais
- **Migrations:** 3 aplicadas
- **Commits Git:** 10+
- **Dias de Desenvolvimento:** 2

---

## ğŸ¯ VisÃ£o de Longo Prazo

**CGBookStore v3** serÃ¡ uma plataforma completa que combina:
1. **E-commerce de Livros** (compra e venda)
2. **Biblioteca Pessoal Digital** (organizaÃ§Ã£o e tracking)
3. **Rede Social de Leitores** (reviews, recomendaÃ§Ãµes)
4. **Assistente LiterÃ¡rio IA** (chatbot inteligente)
5. **GamificaÃ§Ã£o** (conquistas, desafios, ranking)
6. **IntegraÃ§Ã£o Google Books** (catÃ¡logo massivo)
7. **Sistema de VÃ­deos** (entrevistas, book trailers, resenhas)

---

**Documento criado para continuidade do desenvolvimento.**  
**Ãšltima atualizaÃ§Ã£o:** 30/09/2025 23:45  
**Status:** Pronto para migraÃ§Ã£o Supabase e implementaÃ§Ã£o de SeÃ§Ãµes DinÃ¢micas