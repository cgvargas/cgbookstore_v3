# üìÑ CGBookStore v3 - Documento de Estado do Projeto

**Data:** 29/09/2025  
**Vers√£o:** 3.0  
**√öltima Atualiza√ß√£o:** Reestrutura√ß√£o de Views e Templates Base

---

## üéØ Vis√£o Geral do Projeto

**CGBookStore v3** √© uma livraria online desenvolvida em Django 5.0.3 com PostgreSQL (Supabase), focada em proporcionar uma experi√™ncia completa de leitura com biblioteca pessoal gamificada e assistente liter√°rio inteligente.

### Tecnologias Principais
- **Backend:** Django 5.0.3
- **Banco de Dados:** PostgreSQL 17.6 (Supabase)
- **Python:** 3.13
- **Frontend:** Bootstrap 5, Font Awesome
- **Controle de Vers√£o:** Git + GitHub

---

## üìÇ Estrutura Atual do Projeto

```
C:\ProjectsDjango\CGBookStore_v3\
‚îú‚îÄ‚îÄ cgbookstore/              # Configura√ß√µes do projeto
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py
‚îÇ
‚îú‚îÄ‚îÄ core/                     # App principal (livraria)
‚îÇ   ‚îú‚îÄ‚îÄ views/                # Views modulares (NOVO)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ home_view.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ book_views.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search_view.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ about_view.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contact_view.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ library_view.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py             # Book, Author, Category
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ supabase_storage.py
‚îÇ
‚îú‚îÄ‚îÄ accounts/                 # App de autentica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ forms.py
‚îÇ   ‚îú‚îÄ‚îÄ views.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îÇ   ‚îî‚îÄ‚îÄ admin.py
‚îÇ
‚îú‚îÄ‚îÄ chatbot_literario/        # App do chatbot (placeholder)
‚îÇ   ‚îú‚îÄ‚îÄ views.py
‚îÇ   ‚îî‚îÄ‚îÄ urls.py
‚îÇ
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ base.html             # Template base com navbar atualizada
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ home.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ book_list.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search_results.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ about.html        # NOVO
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contact.html      # NOVO
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ library.html      # NOVO (placeholder)
‚îÇ   ‚îî‚îÄ‚îÄ accounts/
‚îÇ       ‚îú‚îÄ‚îÄ login.html
‚îÇ       ‚îî‚îÄ‚îÄ register.html
‚îÇ
‚îú‚îÄ‚îÄ .venv/                    # Ambiente virtual
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ manage.py
‚îî‚îÄ‚îÄ .env                      # Credenciais (n√£o versionado)
```

---

## ‚úÖ Funcionalidades Implementadas

### Core (Livraria)
- ‚úÖ P√°gina inicial com √∫ltimos lan√ßamentos
- ‚úÖ Cat√°logo de livros com pagina√ß√£o (12 por p√°gina)
- ‚úÖ Sistema de busca (t√≠tulo, autor, categoria)
- ‚úÖ P√°gina "Sobre" institucional
- ‚úÖ Formul√°rio de contato (visual, preparado para email)
- ‚úÖ P√°gina de biblioteca pessoal (placeholder estruturado)

### Autentica√ß√£o
- ‚úÖ Registro de usu√°rios
- ‚úÖ Login/Logout
- ‚úÖ Prote√ß√£o de rotas (biblioteca requer login)
- ‚úÖ Navbar din√¢mica (mostra usu√°rio logado)

### Modelos de Dados
```python
# core/models.py
- Category (name, slug, featured)
- Author (name, slug, bio)
- Book (title, slug, author, category, description, publication_date, isbn, price, cover_image)
```

### Views Modulares (Arquitetura)
```python
core/views/
‚îú‚îÄ‚îÄ home_view.py        # HomeView - P√°gina inicial
‚îú‚îÄ‚îÄ book_views.py       # BookListView - Cat√°logo
‚îú‚îÄ‚îÄ search_view.py      # SearchView - Busca
‚îú‚îÄ‚îÄ about_view.py       # AboutView - Institucional
‚îú‚îÄ‚îÄ contact_view.py     # ContactView - Contato (com ContactForm)
‚îî‚îÄ‚îÄ library_view.py     # LibraryView - Dashboard pessoal (LoginRequired)
```

---

## üó∫Ô∏è URLs Mapeadas

| URL | View | Nome | Autentica√ß√£o |
|-----|------|------|--------------|
| `/` | HomeView | `core:home` | N√£o |
| `/livros/` | BookListView | `core:book_list` | N√£o |
| `/buscar/` | SearchView | `core:search` | N√£o |
| `/sobre/` | AboutView | `core:about` | N√£o |
| `/contato/` | ContactView | `core:contact` | N√£o |
| `/biblioteca/` | LibraryView | `core:library` | **Sim** |
| `/contas/login/` | LoginView | `accounts:login` | N√£o |
| `/contas/registrar/` | RegisterView | `accounts:register` | N√£o |
| `/contas/logout/` | LogoutView | `accounts:logout` | Sim |
| `/chatbot/` | ChatbotView | `chatbot:chat` | N√£o |
| `/admin/` | Admin | `admin:index` | Sim (staff) |

---

## üîß Configura√ß√µes Importantes

### Banco de Dados (settings.py)
```python
DATABASES = {
    'default': dj_database_url.config(
        default=config('DATABASE_URL'),
        conn_max_age=600
    )
}
```

### Arquivos Est√°ticos
```python
STATIC_URL = '/static/'
STATICFILES_DIRS = [BASE_DIR / 'static']
STATIC_ROOT = BASE_DIR / 'staticfiles'
```

### Upload de Imagens
```python
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'
```

### Supabase
```python
SUPABASE_URL = config('SUPABASE_URL')
SUPABASE_ANON_KEY = config('SUPABASE_ANON_KEY')
```

---

## üì¶ Depend√™ncias (requirements.txt)

```txt
Django==5.0.3
django-environ==0.11.2
python-decouple==3.8
psycopg[binary]>=3.1.0
dj-database-url==2.1.0
supabase>=2.4.0
storage3>=0.7.3
gotrue>=2.4.1
postgrest>=0.16.0
realtime>=2.0.0
supafunc>=0.4.0
Pillow>=10.0.0
```

---

## üöß Funcionalidades Planejadas (N√£o Implementadas)

### Prioridade Alta
1. **BookDetailView** - P√°gina de detalhes do livro
   - Informa√ß√µes completas
   - Bot√£o "Adicionar √† Biblioteca"
   - Sistema de avalia√ß√£o
   
2. **Popular Banco de Dados**
   - Adicionar livros via Admin
   - Criar fixtures com dados iniciais

3. **Sistema de Biblioteca Pessoal**
   - Models: `UserProfile`, `BookShelf`, `ReadingProgress`, `BookReview`
   - CRUD de prateleiras
   - Progresso de leitura (%)
   - Avalia√ß√µes com estrelas

### Prioridade M√©dia
4. **Sistema de Carrinho de Compras**
   - Models: `Cart`, `CartItem`, `Order`
   - Checkout b√°sico

5. **Integra√ß√£o Supabase Storage**
   - Upload de capas de livros
   - Upload de fotos de perfil

6. **Filtros Avan√ßados**
   - Filtro por categoria
   - Ordena√ß√£o (pre√ßo, data, t√≠tulo)
   - Busca avan√ßada

### Prioridade Baixa
7. **Chatbot Liter√°rio**
   - Integra√ß√£o com API (OpenAI/Ollama)
   - Recomenda√ß√µes personalizadas

8. **Gamifica√ß√£o**
   - Sistema de pontos
   - Conquistas
   - Ranking de leitores

9. **Sistema de Reviews**
   - Coment√°rios p√∫blicos
   - Likes/Dislikes

---

## üîê Vari√°veis de Ambiente (.env)

```env
# Django
SECRET_KEY=sua-secret-key-aqui
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Supabase
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Database
DATABASE_URL=postgresql://user:pass@host:port/database
```

---

## üêõ Problemas Conhecidos

### Resolvidos
- ‚úÖ Depend√™ncias incompat√≠veis (psycopg2-binary vs psycopg3)
- ‚úÖ OneDrive causando conflitos com .git
- ‚úÖ PyCharm n√£o reconhecendo Django

### Pendentes
- ‚ö†Ô∏è Nenhum livro cadastrado no banco (cat√°logo vazio)
- ‚ö†Ô∏è Imagens de capa usando placeholders
- ‚ö†Ô∏è Formul√°rio de contato n√£o envia email (apenas mensagem de sucesso)
- ‚ö†Ô∏è Biblioteca n√£o tem backend funcional (apenas visual)

---

## üîÑ Workflow Git

### Comando Di√°rio
```powershell
# In√≠cio do dia (sincronizar)
git pull

# Fim do dia (enviar altera√ß√µes)
git add .
git commit -m "Descri√ß√£o das altera√ß√µes"
git push
```

### Reposit√≥rio
- **GitHub:** https://github.com/cgvargas/cgbookstore_v3
- **Branch Principal:** main
- **Localiza√ß√£o Local:** `C:\ProjectsDjango\CGBookStore_v3`

---

## üöÄ Como Executar o Projeto

### Primeira Vez
```powershell
# Clonar reposit√≥rio
git clone https://github.com/cgvargas/cgbookstore_v3.git
cd cgbookstore_v3

# Criar ambiente virtual
python -m venv .venv
.\.venv\Scripts\activate

# Instalar depend√™ncias
pip install -r requirements.txt

# Configurar .env
Copy-Item .env.example .env
# Editar .env com credenciais reais

# Aplicar migrations
python manage.py migrate

# Criar superuser
python manage.py createsuperuser

# Rodar servidor
python manage.py runserver
```

### Uso Di√°rio
```powershell
cd C:\ProjectsDjango\CGBookStore_v3
.\.venv\Scripts\activate
python manage.py runserver
```

---

## üìù Pr√≥ximos Passos Recomendados

1. **Criar BookDetailView**
   - Template `book_detail.html`
   - URL `livros/<slug:slug>/`
   - Bot√£o "Ver Detalhes" nos cards

2. **Popular Banco de Dados**
   - Adicionar 20-30 livros via Admin
   - Criar autores e categorias
   - Testar busca e cat√°logo

3. **Implementar Models da Biblioteca**
   ```python
   # core/models.py (adicionar)
   - UserProfile
   - BookShelf (tipos: favorites, to_read, reading, read)
   - ReadingProgress
   - BookReview
   ```

4. **Criar Forms para Biblioteca**
   - Adicionar livro √† prateleira
   - Atualizar progresso
   - Avaliar livro

---

## üìö Documenta√ß√£o Adicional

- **Django Docs:** https://docs.djangoproject.com/en/5.0/
- **Bootstrap 5:** https://getbootstrap.com/docs/5.3/
- **Supabase Docs:** https://supabase.com/docs
- **Font Awesome:** https://fontawesome.com/icons

---

**Documento criado para continuidade do desenvolvimento.**  
**√öltima atualiza√ß√£o:** 29/09/2025 - Estrutura modular de views implementada.